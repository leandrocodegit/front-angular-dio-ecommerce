<main>
    <spa-top></spa-top>
    <spa-load *ngIf="isLoad"></spa-load>
    <!-- Shopping Cart -->
    <section class="hidden">
        <span id="product-description" >Teste</span>
        <input type="text" id="quantity" value="1" min="1" class="form-control"/>
        <input type="text" value="10.0" id="unit-price"/>
    </section>
    <!-- Payment --> 
    <section [class.close]="isLoad" class="payment-form dark">
        <div class="container__payment">
            <div class="accordion accordion-flush" id="accordionFlushExample">
                <div class="payment-details">
                    <form id="form-checkout" class="was-validated">
                        <div class="accordion accordion-flush" id="accordionTitular">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="flush-headingTwo">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                            data-bs-target="#flush-collapseTwo" aria-expanded="false"
                                            aria-controls="flush-collapseTwo">
                                        Dados do titular
                                    </button>
                                </h2>
                                <div id="flush-collapseTwo" class="accordion-collapse collapse"
                                     aria-labelledby="flush-headingTwo" data-bs-parent="#accordionFlushExample">
                                    <div class="accordion-body container">
                                        <div class="row">
                                            <div class="form-group col">
                                                <input value="lpoliveira.ti@gmail.com" required
                                                       id="form-checkout__cardholderEmail" name="cardholderEmail"
                                                       type="email" class="form-control"/>
                                            </div>
                                        </div>
                                        <br>
                                        <div class="row">
                                            <div class="form-group col-sm-5">
                                                <input type="hidden" value="CPF" required
                                                       id="form-checkout__identificationType" name="identificationType"
                                                       class="form-control"/>
                                            </div>
                                            <div class="form-group col-sm-7">
                                                <input value="08987782638" required pattern="[0-9]{1}[0-9][0-9]{9}"
                                                       id="form-checkout__identificationNumber" name="docNumber"
                                                       type="text" class="form-control"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="container">
                            <div class="container" style="width: 95%">
                                <div class="mb-3">
                                    <label for="form-checkout__cardholderName" class="form-label">Nome do
                                        titular</label>
                                        <input (keyup)="execute()" name="cardholderName" minlength="10" required type="text" 
                                        class="form-control" id="form-checkout__cardholderName"
                                        placeholder="Igual do cartão"/>
                                </div>
                                <div class="mb-3">
                                    <label id="token" for="form-checkout__cardNumber" class="form-label">Numero do cartão</label>
                                    <input id="form-checkout__cardNumber" type="hidden"/>
                                    <input (keyup)="execute()" id="numeroCartao" pattern="[0-9\s]{13,19}" required
                                           name="numeroCartao" type="tel" class="form-control"/>
                                    <div class="hidden">
                                        <label for="numeroCartao" generated="false" class="error"></label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="form-checkout__cardExpirationMonth" class="form-label">Validade</label>
                                    <div class="input-group">
                                        <span class="input-group-text" style="color:#bec1c5">Mês</span>
                                        <input (keyup)="execute()" id="form-checkout__cardExpirationMonth" pattern="(0[1-9]|1[012])"
                                               required name="cardExpirationMonth" type="tel" class="form-control is-valid"
                                               placeholder="00"/>
                                        <div class="hidden">
                                            <label for="form-checkout__cardExpirationMonth" generated="false" class="error"></label>
                                        </div>
                                        <span class="input-group-text" style="color:#bec1c5">Ano</span>
                                        <input (keyup)="execute()" id="form-checkout__cardExpirationYear" pattern="[2-9][0-9]{1}" required
                                               name="cardExpirationYear" type="tel" class="form-control is-valid"
                                               placeholder="00"/>
                                        <div class="hidden">
                                            <label for="form-checkout__cardExpirationYear" generated="false" class="error"></label>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="d-flex">
                                            <div class="flex-fill" >
                                                <label for="form-checkout__securityCode" class="form-label">Codigo de
                                                    segurança</label>
                                                <input (keyup)="execute()" id="form-checkout__securityCode" pattern="[0-9]{3}" required
                                                       name="securityCode" type="tel" class="form-control" placeholder="CVV"
                                                        style="width:150px">
                                            </div>
                                            <div class="flex-fill">
                                                <div style="float: right;">
                                                    <img id="bandeira" src="">
                                                </div>
                                            </div>
                                    </div>
                                    <input id="MPHiddenInputToken" name="MPHiddenInputToken" type="hidden">
                                </div>

                                <div id="issuerInput" class="form-group col-sm-12 hidden">
                                    <select id="form-checkout__issuer" name="issuer"  required
                                            class="form-control"></select>
                                </div>
                                <label for="form-checkout__securityCode" class="form-label">Opções de parcelamento</label>
                                <div class="form-group col-sm-12" >
                                    <select id="form-checkout__installments" name="installments" type="text"
                                            class="form-control">
                                        </select>
                                </div>
                                <div class="form-group col-sm-12" style="padding-bottom:30px">
                                    <input   type="hidden" id="amount" value="10.0"/>
                                    <input type="hidden" id="description" value="Teste"/>
                                    <p id="loading-message" style="color: #ff9e3a;padding: 15px;"></p>
                                </div> 
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>
    <!-- Result -->
    <section class="shopping-cart white">
        <div class="container container__result">
            <div class="row">
                <div class="col-md-12 col-lg-12">
                    <div class="items product info product-details">
                        <div class="row justify-content-md-center">
                            <div class="col-md-4 product-detail">
                                <div class="product-info">
                                    <div id="success-response">
                                        <div class="container" style="width: 90%;padding-top:5%">
                                            <p class="text-info text-center">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64"
                                                     fill="currentColor" class="bi bi-check-circle"
                                                     viewBox="0 0 16 16">
                                                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                                    <path d="M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"/>
                                                </svg>
                                            </p>
                                             
                                            <h3 class="text-info text-center" id="status-pagamento"></h3> 
                                        </div>
                                        <div class="container" style="padding-top:5%">
                                            <div class="row mb-3">
                                                <label class="text-center">Transação</label>
                                                <p id="payment-id" class="fs-4 text-center">0</p>
                                                <input id="transacao-id" type="hidden" class="fs-4 text-center"/> 
                                            </div>
                                            <div class="row mb-3">
                                                <label class="text-center">Detalhes</label>
                                                <p id="payment-detail" class="fs-4 text-center">0</p>
                                            </div>
                                            <div class="row mb-3">
                                                <label class="text-center">Status</label>
                                                <p id="payment-status" class="fs-4 text-center">0</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- concluir -->
            <div class="fixed-bottom">
                <div class="d-grid gap-2">
                    <a th:href="@{/pay/confirm}" id="concluir" type="submit"
                       class="btn text-white rounded-0 p-3" style="background:#0dcaf0">
                        <span class="spinner"></span> Concluir
                    </a>
                </div>
            </div>
        </div>
    </section>
    <div class="fixed-bottom">
        <div class="p-3">
          <div class="row">
            <div class="col text-white">
              <a routerLink="/pagamento" class="text-dark">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-arrow-left-circle-fill" viewBox="0 0 16 16">
                    <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"/>
                  </svg>
              </a>
            </div>
            <div class="col d-flex justify-content-center">
              <a (click)=" execute()">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-view-list" viewBox="0 0 16 16">
                  <path d="M3 4.5h10a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2zm0 1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1H3zM1 2a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 2zm0 12a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 14z" />
                </svg>
              </a>
            </div>
            <div class="col d-flex justify-content-end">
              <a routerLink="/cart" class="text-dark">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-bag"
                  viewBox="0 0 16 16">
                  <path d="M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5zM2 5h12v9a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5z" />
                </svg>
                <span class="position-absolute top-0 translate-middle badge rounded-pill bg-secondary">+99</span></a>
            </div>
          </div>
        </div>
        
        <div *ngIf="isValid == 'true'" class="d-grid gap-2">
          <a  (click)="pagar()" id="concluir" class="btn text-white rounded-0 p-3 bg-dark">
           Pagar
          </a>
        </div>
      </div>
</main>
 

 

 